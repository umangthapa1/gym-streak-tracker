{% extends "base.html" %}
{% block page_nav %}
<header class="bg-white border-b border-slate-100 sticky top-16 z-40">
    <div class="max-w-3xl mx-auto px-4 py-4 flex items-center gap-4">
        <a href="/" class="w-10 h-10 rounded-xl bg-gradient-to-br from-indigo-500 to-purple-600 hover:from-indigo-600 hover:to-purple-700 flex items-center justify-center text-white transition-all hover:shadow-lg">
            <i class="fas fa-arrow-left"></i>
        </a>
        <div>
            <h1 class="text-lg font-bold text-slate-900">Badges</h1>
            <p class="text-xs text-slate-500">View your achievements</p>
        </div>
    </div>
</header>
{% endblock %}

{% block content %}
<div class="max-w-3xl mx-auto p-6">
    <div id="badges-container" class="grid grid-cols-3 gap-4">
        <!-- Badges populated by JS -->
    </div>
</div>
<script>
fetch('/api/badges').then(r => r.json()).then(data => {
    const container = document.getElementById('badges-container');
    container.innerHTML = '';
    data.badges.forEach(b => {
        const awarded = data.awarded[b.key];
        const div = document.createElement('div');
        div.className = 'p-4 rounded-lg border bg-white flex flex-col items-center';
        div.innerHTML = `<div class="text-3xl mb-2">${b.icon || 'üèÖ'}</div><div class="font-bold">${b.name}</div><div class="text-sm text-slate-600 mt-1">${b.description || ''}</div>`;
        if (awarded) {
            const at = document.createElement('div');
            at.className = 'text-xs text-indigo-600 mt-2';
            at.textContent = `Awarded: ${awarded.awarded_at}`;
            div.appendChild(at);
        } else {
            const na = document.createElement('div');
            na.className = 'text-xs text-slate-400 mt-2';
            na.textContent = 'Locked';
            div.appendChild(na);
        }
        container.appendChild(div);
    });
});
</script>
{% endblock %}